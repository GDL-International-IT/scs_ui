{"ast":null,"code":"var _jsxFileName = \"/Users/andrew/WebstormProjects/test1/scs_ui/src/components/MovableLabel/MovableLabel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport useInput from \"../../hooks/useInput\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MovableLabel = ({\n  canvasRef,\n  className,\n  id\n}) => {\n  _s();\n  const [labelCoords, setLabelCoords] = useState([0, 0]);\n  const labelRef = useRef(null);\n  const [isActive, setIsActive] = useState(false);\n  const [isFocus, setIsFocus] = useState(false);\n  const input = useInput(`label${id}`, '');\n  function handleClick() {\n    setIsFocus(true);\n    console.log('doubleclick');\n    labelRef.current.focus();\n  }\n  const handleMouseDown = () => {\n    if (!isActive) {\n      setIsActive(true);\n    }\n  };\n  const handleMouseUp = () => {\n    setIsActive(false);\n  };\n  const handleMouseMove = event => {\n    if (isActive) {\n      if (canvasRef.current && labelRef.current) {\n        const rect = canvasRef.current.getBoundingClientRect();\n        const rectLabel = labelRef.current.getBoundingClientRect();\n        const x = event.clientX - rect.left - rectLabel.width / 2;\n        const y = event.clientY - rect.top - rectLabel.height / 2;\n        setLabelCoords([x, y]);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"input\", {\n    className: className,\n    style: {\n      left: labelCoords[0],\n      top: labelCoords[1],\n      border: isActive ? '1px solid red' : isFocus ? '1px solid green' : '1px solid black',\n      zIndex: isActive ? '2' : '1',\n      width: input.value.length + 'ch',\n      cursor: isActive ? 'grabbing' : isFocus ? 'text' : 'grab'\n    },\n    onChange: input.onChange,\n    value: input.value,\n    ref: labelRef,\n    onMouseDown: handleMouseDown,\n    onMouseUp: handleMouseUp,\n    onMouseMove: handleMouseMove,\n    onDragStart: e => e.preventDefault(),\n    onClick: handleClick,\n    readOnly: !isFocus,\n    onBlur: () => setIsFocus(false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n};\n_s(MovableLabel, \"BlFz0x9N2RSCQphBa5RFjYRk8VQ=\", false, function () {\n  return [useInput];\n});\n_c = MovableLabel;\nexport default MovableLabel;\nvar _c;\n$RefreshReg$(_c, \"MovableLabel\");","map":{"version":3,"names":["React","useRef","useState","useInput","jsxDEV","_jsxDEV","MovableLabel","canvasRef","className","id","_s","labelCoords","setLabelCoords","labelRef","isActive","setIsActive","isFocus","setIsFocus","input","handleClick","console","log","current","focus","handleMouseDown","handleMouseUp","handleMouseMove","event","rect","getBoundingClientRect","rectLabel","x","clientX","left","width","y","clientY","top","height","style","border","zIndex","value","length","cursor","onChange","ref","onMouseDown","onMouseUp","onMouseMove","onDragStart","e","preventDefault","onClick","readOnly","onBlur","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/andrew/WebstormProjects/test1/scs_ui/src/components/MovableLabel/MovableLabel.jsx"],"sourcesContent":["import React, {useRef, useState} from 'react'\nimport useInput from \"../../hooks/useInput\"\n\n\nconst MovableLabel = ({canvasRef, className, id}) => {\n    const [labelCoords, setLabelCoords] = useState([0, 0])\n    const labelRef = useRef(null)\n    const [isActive, setIsActive] = useState(false)\n    const [isFocus, setIsFocus] = useState(false)\n    const input = useInput(`label${id}`, '')\n\n    function handleClick() {\n        setIsFocus(true)\n        console.log('doubleclick')\n        labelRef.current.focus()\n    }\n\n    const handleMouseDown = () => {\n        if (!isActive) {\n            setIsActive(true)\n        }\n    }\n\n    const handleMouseUp = () => {\n        setIsActive(false)\n    }\n\n    const handleMouseMove = (event) => {\n        if (isActive) {\n\n            if (canvasRef.current && labelRef.current) {\n                const rect = canvasRef.current.getBoundingClientRect()\n                const rectLabel = labelRef.current.getBoundingClientRect()\n\n\n                const x = event.clientX - rect.left - (rectLabel.width / 2)\n                const y = event.clientY - rect.top - (rectLabel.height / 2)\n\n\n                setLabelCoords([x, y])\n            }\n        }\n    }\n\n\n\n\n    return (\n        <input\n            className={className}\n            style={{\n                left: labelCoords[0],\n                top: labelCoords[1],\n                border: isActive ? '1px solid red' : isFocus ? '1px solid green' : '1px solid black',\n                zIndex: isActive ? '2' : '1',\n                width: input.value.length + 'ch',\n                cursor: isActive ? 'grabbing' : isFocus ? 'text' : 'grab'\n\n            }}\n            onChange={input.onChange}\n            value={input.value}\n            ref={labelRef}\n            onMouseDown={handleMouseDown}\n            onMouseUp={handleMouseUp}\n            onMouseMove={handleMouseMove}\n            onDragStart={e => e.preventDefault()}\n            onClick={handleClick}\n            readOnly={!isFocus}\n            onBlur={() => setIsFocus(false)}\n\n        />\n\n    )\n}\n\nexport default MovableLabel"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}